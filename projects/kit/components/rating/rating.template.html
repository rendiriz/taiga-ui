<label
    #parent
    class="t-rating"
    [attr.aria-label]="value + ' Stars'"
    [class.t-rating--readonly]="readOnly"
    [class.t-rating--disabled]="disabled"
>
    <input
        type="range"
        step="1"
        class="t-rating__input"
        [max]="max"
        [ngModel]="value"
        [attr.tabindex]="readOnly || disabled ? -1 : 0"
        (ngModelChange)="updateValueWhenUseKeyboard($event)"
        (mousemove)="updateFocusedValue($event.offsetX, parent.clientWidth)"
        (mouseleave)="resetFocusedValue()"
        (click)="toggleValueByFocus()"
    />
    <tui-svg
        *tuiRepeatTimes="let item of max"
        class="t-rating__icon-normal"
        [src]="iconNormal"
    ></tui-svg>
    <div
        class="t-rating__wrapper"
        [style.width.%]="focusedValue | ratingPercent: value : max "
    >
        <tui-svg
            *tuiRepeatTimes="let item of max"
            class="t-rating__icon-filled"
            [src]="iconFilled"
        ></tui-svg>
    </div>
</label>
